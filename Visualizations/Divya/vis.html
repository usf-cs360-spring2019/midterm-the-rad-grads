<!DOCTYPE html>
<html>

<!-- head -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>CS 360/560 Spring 2019</title>

  <!-- bulma 0.7.2 and font awesome v5.7.1 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css" integrity="sha256-2pUeJf+y0ltRPSbKOeJh09ipQFYxUdct5nTY6GAXswA=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <link href="style.css" rel="stylesheet" type="text/css" />
  <link href="style2.css" rel="stylesheet" type="text/css" />
<style>
.hero.is-primary.is-bold{
    background: linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(https://storage.googleapis.com/kaggle-datasets-images/720/1344/64a17f2ce238d73491197ac7a71dab11/dataset-cover.JPG);
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
  }
  .hero.is-primary.is-bold .subtitle{
      font-weight: bolder;
    }

    #myImg {
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    #myImg:hover {opacity: 0.7;}

    /* The Modal (background) */
    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      padding-top: 100px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
    }

    /* Modal Content (image) */
    .modal-content {
      margin: auto;
      display: block;
      width: 100%;
      max-width: 900px;
    }

    /* Caption of Modal Image */
    #caption {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
      text-align: center;
      color: #ccc;
      padding: 10px 0;
      height: 150px;
    }

    /* Add Animation */
    .modal-content, #caption {
      -webkit-animation-name: zoom;
      -webkit-animation-duration: 0.6s;
      animation-name: zoom;
      animation-duration: 0.6s;
    }

    @-webkit-keyframes zoom {
      from {-webkit-transform:scale(0)}
      to {-webkit-transform:scale(1)}
    }

    @keyframes zoom {
      from {transform:scale(0)}
      to {transform:scale(1)}
    }

    /* The Close Button */
    .close {
      position: absolute;
      top: 15px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      transition: 0.3s;
    }

    .close:hover,
    .close:focus {
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
    }

    /* 100% Image Width on Smaller Screens */
    @media only screen and (max-width: 700px){
      .modal-content {
        width: 100%;
      }
    }
    </style>
</head>

<!-- body -->
<body>

  <!-- header -->
  <section class="hero is-primary is-bold">
    <!-- todo: change assignment and name -->
    <div class="hero-body">
      <div class="container">
        <h1 class="title">
          SF Fire Department service calls:Data analysis for the year 2018
        </h1>
        <h2 class="subtitle">
          The Rad Grads
        </h2>
      </div>
    </div>

    <!-- todo: change navigation as needed -->
    <div class="hero-foot">
      <div class="container">
        <nav class="navbar" role="navigation" aria-label="main navigation">

          <div class="navbar-brand">
            <a class="navbar-item" href="../../index.html">
              <span class="icon">
                <i class="fas fa-home"></i>
              </span>
              <span>Home</span>
            </a>
          </div>

          <div id="main-navbar" class="navbar-menu">
            <a class="navbar-item" href="../../dataprocessing.html">
              <span class="icon">
                <i class="fas fa-chart-area"></i>
              </span>
              <span>Data and Processing</span>
            </a>

            <a class="navbar-item" href="../../prototypes.html">
              <span class="icon">
                <i class="fas fa-chart-area"></i>
              </span>
              <span>Prototypes</span>
            </a>

            <a class="navbar-item" href="../../Visualizations/Tracy/vis.html">
              <span class="icon">
                <i class="fas fa-chart-area"></i>
              </span>
              <span>Tracy's Visualization</span>
            </a>

            <a class="navbar-item" href="#">
              <span class="icon">
                <i class="fas fa-chart-area"></i>
              </span>
              <span>Divya's Visualization</span>
            </a>

            <a class="navbar-item" href="../../Visualizations/Roger/vis.html">
              <span class="icon">
                <i class="fas fa-chart-area"></i>
              </span>
              <span>Roger's Visualization</span>
            </a>


          </div>
          <div class="navbar-end">
          <!--  <a class="navbar-item" href="../../index.html#grade">
              <span class="icon">
                <i class="fas fa-tasks"></i>
              </span>
              <span>Grade</span>-->
            </a>
            <a class="navbar-item" href="../../about.html">
              <span class="icon">
                <i class="fas fa-info-circle"></i>
              </span>
              <span>About the Team</span>
            </a>
          </div>

        </nav>
      </div>
    </div>
  </section>

  <!-- todo: add sections as necessary -->
  <section class="section">
    <div class="container content">
      <!-- todo: modify as necessary (or move visualizations to separate pages) -->
      <h1>Divya's Visualizations</h1>
      <h3>Visualization-1 (D3)</h3>
      <div class="select-container">
          <select onchange="handleDropdown(this.value)">
            <option selected="" value="">---Select----
            </option>
            <option  value="name-ascending">Alphabetical-ascending
            </option>
            <!--<option  value="name-descending">Alphabetical-descending
            </option>-->
            <!--<option  value="frequency-ascending">Number of calls-ascending
            </option>-->
              <option  value="frequency-descending">Number of calls-descending
                </option>
          </select>
      </div>
    <br/>
      <svg id="svg1" width="960" height="600" style="background-color: white;border:1px solid black;"></svg>
      <script src="script.js"></script>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script type="text/javascript">
          drawStackedBar();
        </script>


      <h3>Interpretation</h3>

      <p>
        The above stacked bar shows the number of emergency calls, made from San Francisco neighborhoods on th year 2018.
        Data for each neighborhood is grouped by call type groups which are mainly divided into four categories: Alarm, Fire, Non-Life threatening, Potentially life threatening.
        Mouse hover over each neighborhood's respective call type groups, gives the number of calls received for that group.
        Also change the values in the dropdown menu to sort the bar chart. Data can be sorted by Alphabetical (Neighborhoods)-ascending and
        Number of calls-descending.
      </p>

      <h3>Discussion</h3>
      <p>
        When the data is analyzed for each neighborhood, its shocking to see that most of the calls made to San Francisco fire department were
        for potentially life-threatening emergencies and the number of calls are pretty high.
        These calls need to be addressed with high priority and require to have less response time.
        The calls that are classified as 'Potentially Life threatening' are mainly medical emergencies.
      <br><br>
      The analysis of the data makes us wonder, why fire department has to respond to all the life threatening emergencies?
      The answer is explained in
      <a href="https://lompocrecord.com/news/local/firefighters-respond-to-all-kinds-of-emergencies/article_56dfc084-3bf3-11e0-b939-001cc4c002e0.html">Lompoc Record</a>
      </br>Click on the popup image below to see the population recorded on each neighborhood by sfplanning.org based on American Community Survey 2010â€“2014
        (The image was made using Tableau by creating a csv file from
        <a href="http://default.sfplanning.org/publications_reports/SF_NGBD_SocioEconomic_Profiles/2010-2014_ACS_Profile_Neighborhoods_v3AH.pdf">sfplanning.org</a>
        pdf manually). This helps to get a better understanding about the relation between population and emergency call records in each neighborhoods.
      </p>
      <img id="myImg" src="Population_Survey.png"  style="width:100%;max-width:300px">
      <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
      </div>

      <script>
        // Get the modal
        var modal = document.getElementById('myModal');

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var img = document.getElementById('myImg');
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");
        img.onclick = function(){
          modal.style.display = "block";
          modalImg.src = this.src;
          captionText.innerHTML = this.alt;
        }

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
          modal.style.display = "none";
        }
      </script>
      <h3>Credits</h3>

      <p>
        Data set:
      </br><a href="https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data">Data SF</a><br>
      </br>Code References:
      </br><a href="http://bl.ocks.org/KatiRG/5f168b5c884b1f9c36a5">KatiRGâ€™s clickable stacked bar chart</a>
      </br><a href="https://observablehq.com/@d3/sortable-bar-chart">Mike Bostockâ€™s Sortable Bar Chart</a>
      </br><a href="https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_modal_img">w3schools</a>
      <br>
      </br>Other Supporting Data References:
      </br><a href="http://default.sfplanning.org/publications_reports/SF_NGBD_SocioEconomic_Profiles/2010-2014_ACS_Profile_Neighborhoods_v3AH.pdf">sfplanning.org</a>
      </br><a href="https://lompocrecord.com/news/local/firefighters-respond-to-all-kinds-of-emergencies/article_56dfc084-3bf3-11e0-b939-001cc4c002e0.html">Lompoc Record</a>
      </br><a href="https://patch.com/california/shermanoaks/how-fast-do-firefighters-respond-youll-soon-find-out">How Fast Do Firefighters Respond?</a>
      </p>
      </div>
  </section>

  <section class="section">
    <div class="container content">
      <h3>Visualization-2 (D3)</h3>
      <div class="select-container">
        <select onchange="handleDropdownChange(this.value)">
            <option selected="" value="">---Select----
            </option>
            <option value="name-ascending">Alphabetical-ascending
            </option>
            <!--<option value="name-descending">Alphabetical-descending
            </option>
            <option value="traveltime-ascending">Travel Time-ascending
            </option>-->
            <option value="traveltime-descending">Travel Time-descending
            </option>
        </select>
    </div>
    <br/>
      <svg id="svg2" width="960" height="600" style="background-color: white;border:1px solid black;"></svg>
      <script src="script2.js"></script>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script type="text/javascript">
          barChart();
        </script>
      <h3>Interpretation</h3>
      <p>
        The above bar graph shows the average travel time of SF Fire engines to each neighborhood, for <b>Potentially life threatening emergencies</b>.
        Average travel time is calculated from the difference of 'Dispatch Time' and 'On scene Time'. Hover over the bars to see the exact value of travel time.
        The bars can be sorted using the options in the dropdown above. Bars can be sorted alphabetically-ascending and traveltime-descending.
      </p>

      <h3>Discussion</h3>

      <p>
        The Visualization-1 is the motivation for Visualization-2.
        In Visualization-1, we discussed that number of calls for life threatening emergencies
        were high in each neighborhood. These calls should be treated with high priority and should be
        addressed with less response time.

      Inorder to explore more about the response times to each neighborhood, I chose to calculate average travel time to each neighborhood.
        Instead of considering the total response time, I chose travel time because response time is the addition of dispatch call duration,turn out time
        and travel time. Among the above times, the most significant one is travel time.
      </br>
      </br>
        By analyzing the graph, we can see that fortunately for most of the neighborhoods, the travel time is very less which is around 5 minutes.
        From the articles mentioned in the credits, I came to a know  that  in a life-threatening medical emergency, first responders providing basic
        and advanced life support and arrive first at the scene of the incident to treat the patient until an ambulance arrives to transport the patient to the hospital, if necessary.
        The goal in 1710 (for career firefighters) is also states: 60 seconds to turn-out, 4 minutes for the first engine company to arrive,
        and 8 minutes for the full first-alarm assignment for at least 90 percent of all fire calls.
        But we see some outliers like Treasure island, Lakeshore, Visitacion valley, Presidio with travel time itself as around 7-9 minutes.
        This can be due to various reasons like traffic, road conditions, or station location and traffic.
        Refer to the pop up image below to see the different fire station locations in the city for a better understanding.
        We can conclude that there is a need to improve response times in some areas of the city.
      </br>

      </p>
      <img id="myImg2" src="City_FireStations.png"  style="width:100%;max-width:300px">
      <div id="myModal2" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
      </div>

      <script>
        // Get the modal
        var modal = document.getElementById('myModal');

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var img = document.getElementById('myImg2');
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");
        img.onclick = function(){
          modal.style.display = "block";
          modalImg.src = this.src;
          captionText.innerHTML = this.alt;
        }

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
          modal.style.display = "none";
        }
      </script>
      <h3>Credits</h3>
      Data set:
    </br><a href="https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data">Data SF</a><br>
    </br>Other Supporting Data References:
  </br><a href="https://sf-fire.org/">sf-fire.org</a>
    </br><a href="https://sfgov.org/scorecards/public-safety/ambulance-response-life-treatening-emergencies">City performance score cards</a>
    </br><a href="https://brucehensler.typepad.com/the-practical-fireman/2008/07/nfpa-1710-1720-and-response-time.html">NFPA 1710, 1720, and response time</a>
    </div>
  </section>

  <!-- separator between sections -->
  <hr class="container">

  <!-- footer -->
  <footer class="footer">
    <div class="content has-text-centered">
      <small>
        <a href="#top">
          <span class="fas fa-arrow-up"></span>
          <span>Back to Top</span>
        </a>
        <br/>
        <a href="/">CS 360/560 Data Visualization</a>
        &bullet;
        <a href="https://myusf.usfca.edu/arts-sciences/computer-science">Department of Computer Science</a>
        &bullet;
        <a href="https://www.usfca.edu/">University of San Franciscio</a>
      </small>
    </div>
  </footer>></a>

<!-- end body and html -->
</body>
</html>
